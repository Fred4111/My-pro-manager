
{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3 class="mb-0">Projects</h3>
</div>
<div class="row g-3">
  {% for p in projects %}
  <div class="col-md-6 col-lg-4">
    <div class="card h-100">
      <div class="card-body">
        <h5 class="card-title">{{ p.name }}</h5>
        <p class="card-text text-truncate">{{ p.description or 'No description' }}</p>
        <ul class="list-unstyled small">
          <li><strong>Start:</strong> {{ p.start_date }}</li>
          <li><strong>Progress:</strong> {{ (p.progress or '—')[:120] }}{% if p.progress and p.progress|length > 120 %}...{% endif %}</li>
          <li><strong>End:</strong> {{ p.end_date or '—' }}</li>
          <li><strong>Status:</strong> {{ p.status or '—' }}</li>
        </ul>
        <a href="{{ url_for('project_detail', project_id=p.id) }}" class="btn btn-sm btn-outline-primary">Open</a>
        <a href="{{ url_for('edit_project', project_id=p.id) }}" class="btn btn-sm btn-outline-secondary">Edit</a>
        <form action="{{ url_for('delete_project', project_id=p.id) }}" method="post" class="d-inline" onsubmit="return confirm('Delete this project?');">
          <button class="btn btn-sm btn-outline-danger" type="submit">Delete</button>
        </form>
      </div>
    </div>
  </div>
  {% else %}
  <div class="col-12">
    <div class="alert alert-info">No projects yet. Click "New" to create one.</div>
  </div>
  {% endfor %}
</div>
{% endblock %}
